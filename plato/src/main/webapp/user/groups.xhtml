<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:x="http://java.sun.com/jsf/composite/htmlx"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://java.sun.com/jsf/composite/plato"
	template="/WEB-INF/templates/default.xhtml"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<ui:define name="title">SCAPE Planning Suite - Group</ui:define>

	<ui:define name="content">

		<h1>Group</h1>

		<h:form>
			<fieldset id="group" class="size-full">
				<legend class="fieldset-full-size-legend">
					<ui:include src="/plato/shared/legend_nav.xhtml" />
					<h:outputText value="Current Group" />
				</legend>
				<p:inputText labelText="Name" id="name"
					input="#{user.organisation.name}" />

				<p:inputDiv labelText="Group members" id="groupMembers"
					input="#{user.organisation.name}">

					<a4j:repeat value="#{user.organisation.users}" var="groupMember"
						rows="20" id="groupMembers">
						<p:user user="#{groupMember}">

							<h:commandButton value="Remove"
								action="#{groups.removeUser(groupMember)}" rendered="#{groupMember.username != user.username}" />

						</p:user>
						<br />
					</a4j:repeat>

				</p:inputDiv>

				<p:inputDiv labelText="" id="inviteUsers"
					input="#{user.organisation.name}">
					<p:inputTextArea id="inviteMailsString"
						input="#{groups.inviteMailsString}" />

					<h:commandButton value="Send invitation"
						action="#{groups.inviteUsers()}" />
				</p:inputDiv>
			</fieldset>

			<p:savediscard bean="#{groups}" />
		</h:form>
	</ui:define>
</ui:composition>
