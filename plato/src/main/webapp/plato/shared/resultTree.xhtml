<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://java.sun.com/jsf/composite/plato"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:rich="http://richfaces.org/rich">

    <div class="margin-bottom-huge">
        <h:form>
            <div id="treeheader" style="padding-top: 5px; width: 880px">
                <div class="treetable_cell" style="width: 50%; min-width: 400px">
                    <b>Node</b>
                </div>
                <div class="treetable_cell" style="text-align: left; width: 50%;">
                    <b>Results</b>
                </div>
            </div>
            <div id="treecontent" style="clear: both;">

                <rich:tree var="node" style="padding-top:10px;width:880px" showConnectingLines="false">
                    <rich:treeModelRecursiveAdaptor roots="#{rootNode}" nodes="#{node.children}" leaf="#{node.leaf}">
                        <rich:treeNode expanded="#{treeHelper.expandedNodes[node]}" styleClass="treenode" highlightedClass="highlighted" iconLeaf="" icon="" >
                            <div class="treenode">
                                <div
                                    style="float: left; position: relative; white-space: normal; width: 40%;">
                                    <a4j:outputPanel layout="block" rendered="#{node.leaf}">
                                        <a href="#results#{node.id}"> <h:outputText
                                                value="#{node.name}" /> </a>
                                    </a4j:outputPanel>
                                    <h:outputText value="#{node.name}" rendered="#{not node.leaf}" />
                                </div>
                                <div style="float: right; position: relative; min-width: 380px;">
                                    <table>
                                        <a4j:repeat value="#{alternatives}" var="a" rowKeyVar="i">
                                            <tr>
                                                <td><h:outputText value="#{a.name}: &nbsp;&nbsp;" />
                                                </td>
                                                <td width="40px"><h:outputText
                                                        value="#{node.resultStrings[a.name]}&nbsp;&nbsp;" />
                                                </td>
                                                <td width="253px"><img
                                                    width="#{50 * node.results[a.name]}" height="10"
                                                    src="#{request.contextPath}/resources/gfx/chart/chart-bar#{i}.jpg" />
                                                </td>
                                            </tr>
                                        </a4j:repeat>
                                    </table>
                                </div>
                            </div>
                        </rich:treeNode>
                    </rich:treeModelRecursiveAdaptor>
                </rich:tree>
            </div>
        </h:form>
    </div>

</ui:composition>
